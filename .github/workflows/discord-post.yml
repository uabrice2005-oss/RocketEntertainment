name: Post to Discord

on:
  workflow_dispatch: {}       # lets you run it manually
  schedule:
    - cron: "0 15 * * 1"      # runs every Monday at 9:00 AM Central Time (15:00 UTC)

jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord message
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
          MESSAGE: |
            üóìÔ∏è Weekly Pay Reminder
            ‚Ä¢ Check last weekend‚Äôs events
            ‚Ä¢ Pay DJs, assistants, and ops
            ‚Ä¢ Post your recap in #event-recaps
            ‚Ä¢ Log gear issues in #ops-issues
        run: |
          jq -n --arg content "$MESSAGE" \
            '{content: $content}' \
            | curl -fsSL -H 'Content-Type: application/json' \
              -d @- "$DISCORD_WEBHOOK_URL"
