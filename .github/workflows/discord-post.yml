name: Post to Discord

on:
  workflow_dispatch: {}       # lets you run it manually
  schedule:
  - cron: "0 15 1-7 * 1"      # 1st Monday of each month at 9:00 AM Central
  - cron: "0 15 15-21 * 1"    # 3rd Monday of each month at 9:00 AM Central


jobs:
  send:
    runs-on: ubuntu-latest
    steps:
      - name: Send Discord message
        env:
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
          MESSAGE: |
            üóìÔ∏è Weekly Reminder
            ‚Ä¢ Plan ahead. Set up client meetings and plan gear swap for your next two weeks.
            ‚Ä¢ Post your recap in #event-recaps-and-issues
            ‚Ä¢ Log gear issues in #gear-problems
            ‚Ä¢ Remember that you are creating memories that last a lifetime. Treat it that way!! Make em' swoon behind the scenes and on the dance floor.
        run: |
          jq -n --arg content "$MESSAGE" \
            '{content: $content}' \
            | curl -fsSL -H 'Content-Type: application/json' \
              -d @- "$DISCORD_WEBHOOK_URL"
